<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Branch Website - Test</title>
    <script>
       // load Branch
       (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener banner closeBanner closeJourney data deepview deepviewCta first init link logout removeListener setBranchViewData setIdentity track trackCommerceEvent logEvent disableTracking getBrowserFingerprintId crossPlatformIds lastAttributedTouchData setAPIResponseCallback qrCode setRequestMetaData setAPIUrl getAPIUrl setDMAParamsForEEA".split(" "), 0);
       // init Branch
       </script>
      </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/main.js"></script>

    <button><a href="loginpage.html">Login</a></button>
    <button><a href="register.html">Register</a></button>
    <button><a href="loginpage.html">Random</a></button>
    <button id="generateQR">Create QR Code</button>
    <div id="branch-qr"></div>  

    <!-- Branch init and QR generation script goes here -->
    <script>
      // Wait until DOM is fully loaded
      window.addEventListener('DOMContentLoaded', function () {
        // Initialize Branch
        branch.init('key_live_gCnJnMI2dWTfIZAhGcMYUbioFucFiQZi', function(err, data) {
          if (err) {
            console.error('Branch init error:', err);
          } else {
            console.log('Branch init success:', data);
          }
        });

        // QR code generation logic
        document.getElementById('generateQR').addEventListener('click', function () {
          const qr = branch.qrCode({
            data: {
              '$desktop_url': 'https://example.com',
              'custom_string': 'qr-code-test'
            },
            image: {
              format: 'png',
              width: 250,
              code_color: '#000000',
              background_color: '#ffffff'
            },
            qrCodeSettings: {
              margin: 2
            }
          });

          qr.getBase64(function (err, data) {
            if (err) {
              console.error('QR Code error:', err);
              return;
            }

            const img = document.createElement('img');
            img.src = data;
            const container = document.getElementById('branch-qr');
            container.innerHTML = '';
            container.appendChild(img);
          });
        });
      });
    </script>
  </body>
  </html>